import{t as j,l as R,_ as B,g as M,m as V}from"./app.EsdYxqsV.js";import"./chunks/dayjs.BA9YVBT0.js";import{a as E}from"./chunks/vue-router.Cl2bmqA4.js";import{k as r,p as T,P as a,N as k,R as i,u as o,$ as x,F as C,a0 as S,M as F,X as b,O as e,S as f,W as H,V as z,L as I,b as L,Z as O,C as $}from"./framework.Cmyt3UYZ.js";import{b as A,_ as D,a as G}from"./YunPostMeta.vue_vue_type_script_setup_true_lang.Btr0uDX5.js";import{u as W}from"./post.BHyPyPTy.js";import{u as X}from"./chunks/vue-i18n.BVEHcM6n.js";function Z(m){const p=E(),s=r(()=>Number.parseInt(p.params.page||"1")),n=r(()=>Math.ceil(m.total/m.pageSize)),d=r(()=>s.value===1||s.value===n.value?3:2);function y(l){return l===1||l===n.value?!0:l>s.value-d.value&&l<s.value+d.value}function c(l){return l===1?"/":`/page/${l}`}const _=r(()=>c(s.value-1)),v=r(()=>c(s.value+1)),g=r(()=>s.value>1),t=r(()=>s.value<n.value);return{curPage:s,totalPages:n,showPage:y,surLen:d,getTo:c,prevTo:_,nextTo:v,showPrev:g,showNext:t}}const q={class:"pagination"},J=T({__name:"YunPagination",props:{total:{},pageSize:{}},setup(m,{expose:p}){const s=m,{curPage:n,totalPages:d,showPage:y,getTo:c,surLen:_,prevTo:v,nextTo:g,showPrev:t,showNext:l}=Z({total:s.total,pageSize:s.pageSize});return p({curPage:n}),(P,h)=>{const w=F("RouterLink");return e(),a("nav",q,[o(t)?(e(),k(w,{key:0,class:"page-number",to:o(v),"aria-label":"prev"},{default:x(()=>[...h[0]||(h[0]=[f("div",{"i-ri-arrow-left-s-line":""},null,-1)])]),_:1},8,["to"])):i("v-if",!0),(e(!0),a(C,null,S(o(d),u=>(e(),a(C,null,[o(y)(u)?(e(),k(w,{key:u,class:b(["page-number",o(n)===u&&"active"]),to:o(c)(u)},{default:x(()=>[H(z(u),1)]),_:2},1032,["class","to"])):u===o(n)-o(_)?(e(),a("span",{key:`prev-space-${u}`,class:"space",disabled:""}," ... ")):u===o(n)+o(_)?(e(),a("span",{key:`next-space-${u}`,class:"space",disabled:""}," ... ")):i("v-if",!0)],64))),256)),o(l)?(e(),k(w,{key:1,class:"page-number",to:o(g),"aria-label":"next"},{default:x(()=>[...h[1]||(h[1]=[f("div",{"i-ri-arrow-right-s-line":""},null,-1)])]),_:1},8,["to"])):i("v-if",!0)])}}}),K={},Q={w:"full",h:"10",class:"absolute bottom-0 bg-gradient-to-t from-$va-c-bg-light to-transparent z-1"};function U(m,p){return e(),a("div",Q)}const ee=I(K,[["render",U]]),te={class:"flex flex-1 of-hidden justify-start items-start post-card-info",w:"full"},se=["src","alt"],oe={class:"flex-center title text-2xl",text:"center",font:"serif black"},ae={flex:"~ grow col",w:"full",justify:"center",items:"center"},ne={key:0,py:"1"},re=["innerHTML"],le={key:2,m:"b-5"},ie=["href"],ce={w:"full",class:"yun-card-actions flex justify-between","min-h":"10",text:"sm"},ue={class:"post-categories inline-flex",flex:"wrap 1",items:"center"},pe=T({__name:"YunPostCard",props:{post:{}},setup(m){const p=m,{t:s,locale:n}=X(),{icon:d,styles:y,color:c}=W(p.post.type),_=L("bg-gradient-to-r gradient-text from-$va-c-primary to-$va-c-primary-lighter"),v=r(()=>c?"":p.post.postTitleClass||_.value),g=r(()=>j(p.post.title||"",n.value));return(t,l)=>{const P=B,h=A,w=ee,u=D,Y=G,N=R;return e(),k(N,{class:b(["w-full",t.post.cover?"post-card-image":"post-card"]),m:"auto",overflow:"hidden",style:O(o(y))},{default:x(()=>[f("div",te,[t.post.cover?(e(),a("img",{key:0,src:t.post.cover,alt:o(s)("post.cover"),width:"320",height:"180",w:"40%",h:"54",class:"cover object-cover object-center md:shadow",loading:"lazy"},null,8,se)):i("v-if",!0),f("div",{class:b(["flex flex-col items-center relative",t.post.cover&&"h-54"]),w:"full"},[$(P,{class:b(["post-title-link cursor-pointer",v.value]),to:t.post.path||"",m:"t-3"},{default:x(()=>[f("div",oe,[t.post.type?(e(),a("div",{key:0,class:b(["inline-flex",o(d)]),m:"r-1"},null,2)):i("v-if",!0),f("span",null,z(g.value),1)])]),_:1},8,["to","class"]),$(h,{frontmatter:t.post},null,8,["frontmatter"]),f("div",ae,[t.post.excerpt_type==="text"?(e(),a("div",ne)):i("v-if",!0),t.post.excerpt?(e(),a("div",{key:1,class:"markdown-body",op:"90",text:"left",w:"full",p:"x-6 lt-sm:4 y-2",innerHTML:t.post.excerpt},null,8,re)):(e(),a("div",le))]),i(' <div m="b-5" /> '),t.post.excerpt?(e(),k(w,{key:0})):i("v-if",!0),t.post.url?(e(),a("a",{key:1,href:t.post.url,class:"post-link-btn shadow hover:shadow-md z-2",rounded:"",target:"_blank",m:"b-4"},z(o(s)("post.view_link")),9,ie)):i("v-if",!0)],2)]),i(" always show "),f("div",ce,[f("div",ue,[$(u,{m:"l-1",categories:t.post.categories},null,8,["categories"])]),t.post.tags?(e(),k(Y,{key:0,m:"1",tags:t.post.tags},null,8,["tags"])):i("v-if",!0)])]),_:1},8,["class","style"])}}}),fe={flex:"~ col",class:"yun-post-list gap-4",w:"full",p:"x-4 lt-sm:0"},me={key:0,py2:"",op50:"","text-center":""},ke=T({__name:"YunPostList",props:{type:{},posts:{}},setup(m){const p=m,s=L(),n=r(()=>s.value?.curPage||1),d=M(),y=V(),c=r(()=>y.value.pageSize),_=r(()=>(p.posts||d.postList).filter(g=>!g.hide)),v=r(()=>_.value.slice((n.value-1)*c.value,n.value*c.value));return(g,t)=>{const l=pe,P=J;return e(),a(C,null,[f("div",fe,[v.value.length?i("v-if",!0):(e(),a("div",me," 博主还什么都没写哦～ ")),(e(!0),a(C,null,S(v.value,(h,w)=>(e(),k(l,{key:w,post:h},null,8,["post"]))),128))]),$(P,{ref_key:"paginationRef",ref:s,class:"mt-5",total:_.value.length,"page-size":c.value},null,8,["total","page-size"])],64)}}});export{ke as _};
