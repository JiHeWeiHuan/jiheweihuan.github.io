import{i as F,t as N,j as U,g as D,u as O,k as W,a as M,b as H,d as G,c as J,l as Q,h as X,e as Z,f as ee}from"./app.B3TpP1nL.js";import{_ as te}from"./YunPostCollapse.vue_vue_type_style_index_0_lang.DDlxmjSL.js";import{a as R,u as ae}from"./chunks/vue-router.DSCjtdm7.js";import"./chunks/dayjs.BA9YVBT0.js";import{p as Y,k as _,M as V,N as $,P as c,u as i,O as a,F as v,R as w,$ as u,S as p,V as b,b as L,d as oe,C as o,a3 as z,a0 as A,a6 as ne}from"./framework.Cmyt3UYZ.js";import{u as x}from"./chunks/vue-i18n.BVEHcM6n.js";import{u as re,a as se}from"./animation.BhYQMRfX.js";import{_ as le}from"./YunPageHeader.vue_vue_type_script_setup_true_lang.nLwLTp4p.js";import"./chunks/@vueuse/motion.DIzaWrax.js";import"./chunks/pinia.DKjRsRsw.js";/* empty css                    */import"./chunks/nprogress.BbkQUb46.js";import"./index.BRXJGymZ.js";const ie={font:"serif black"},ce=Y({__name:"YunCategoryChildItem",props:{i:{},categoryItem:{},parentKey:{}},setup(k){const{locale:l}=x();function m(e){return N(e.title||"",l.value)}const t=R(),g=_(()=>{const e=t.query.category||"";return Array.isArray(e)?[e]:e.split("/")});return(e,n)=>{const y=B,d=V("RouterLink");return i(F)(e.categoryItem)?(a(),$(y,{key:0,"parent-key":e.parentKey?`${e.parentKey}/${e.categoryItem.name}`:e.categoryItem.name,category:e.categoryItem,collapsable:!g.value.includes(e.categoryItem.name)},null,8,["parent-key","category","collapsable"])):(a(),c(v,{key:1},[e.categoryItem.title?(a(),$(d,{key:0,to:e.categoryItem.path||"",class:"inline-flex items-center gap-2 px-3 py-2 w-full rounded",hover:"bg-black/5"},{default:u(()=>[n[0]||(n[0]=p("div",{"i-ri-file-text-line":""},null,-1)),p("span",ie,b(m(e.categoryItem)),1)]),_:1},8,["to"])):w("v-if",!0)],64))}}}),ue={key:0,"i-ri-folder-add-line":""},pe={key:1,class:"text-$va-c-primary dark:text-$va-c-primary-lighter","i-ri-folder-reduce-line":""},me={class:"rounded-full px-1.5 bg-black/5 shadow-sm op-60",text:"xs"},ye={key:0},B=Y({__name:"YunCategory",props:{i:{},parentKey:{},category:{},level:{},collapsable:{type:Boolean,default:!0}},setup(k){const l=k,m=ae(),t=L(l.collapsable),{t:g}=x(),{$t:e}=U(),n=L(),{show:y}=re(n);function d(r){t.value=!1,m.push({query:{category:r}}),y()}oe(()=>{const r=document.querySelector(".post-collapse-container");r&&(n.value=r)});const h=L();return l.level===1&&se(h,{i:l.i||0,y:20,duration:200}),(r,s)=>{const I=ce;return a(),c(v,null,[p("li",{ref_key:"categoryRef",ref:h,class:"category-list-item inline-flex items-center cursor-pointer w-full gap-2 px-3 py-2 rounded",hover:"bg-black/5"},[p("span",{class:"folder-action inline-flex",hover:"text-$va-c-primary-lighter",onClick:s[0]||(s[0]=f=>t.value=!t.value)},[t.value?(a(),c("div",ue)):(a(),c("div",pe))]),p("span",{class:"category-name inline-flex items-center gap-2 w-full",onClick:s[1]||(s[1]=f=>d(r.parentKey))},[p("span",null,b(r.category.name==="Uncategorized"?i(g)("category.uncategorized"):i(e)(r.category.name)),1),p("span",me,b(r.category.total),1)])],512),o(z,{"enter-active-class":"v-enter-active","enter-from-class":"v-enter-from","leave-active-class":"v-leave-active","leave-to-class":"v-leave-to",duration:{enter:200,leave:0}},{default:u(()=>[t.value?w("v-if",!0):(a(),c("ul",ye,[(a(!0),c(v,null,A(r.category.children.values(),(f,C)=>(a(),c("li",{key:C,class:"post-list-item text-$va-c-text",m:"l-4",hover:"text-$va-c-primary-lighter"},[o(I,{i:C,"category-item":f,"parent-key":r.parentKey},null,8,["i","category-item","parent-key"])]))),128))]))]),_:1})],64)}}}),ge={flex:"~ col"},fe=Y({__name:"YunCategories",props:{categories:{},level:{default:0},collapsable:{type:Boolean,default:!0}},setup(k){const l=R(),m=_(()=>{const t=l.query.category||"";return Array.isArray(t)?[t]:t.split("/")});return(t,g)=>{const e=B;return a(),c("div",ge,[(a(!0),c(v,null,A(t.categories.values(),(n,y)=>(a(),c("ul",{key:n.name,class:"category-list"},[o(e,{i:y,"parent-key":n.name,category:n,level:t.level+1,collapsable:!m.value.includes(n.name)},null,8,["i","parent-key","category","level","collapsable"])]))),128))])}}}),de={text:"center",class:"yun-text-light",p:"2"},Se=Y({__name:"categories",setup(k){const{t:l}=x(),m=D(),t=O(),g=R(),e=_(()=>g.query.category||""),n=W(),y=_(()=>(t.value.icon||(t.value.icon="i-ri-folder-2-line"),t.value.icon)),d=_(()=>m.postList.filter(s=>s.categories&&e.value!=="Uncategorized"?typeof s.categories=="string"?s.categories===e.value:s.categories.join("/").startsWith(e.value)&&s.categories[0]===e.value.split("/")[0]:!s.categories&&e.value==="Uncategorized"?s.categories===void 0:!1)),h=M(t);return H([G({"@type":"CollectionPage"})]),(r,s)=>{const I=J,f=le,C=fe,S=V("RouterView"),K=te,P=Q,j=X,q=Z,T=ee;return a(),c(v,null,[o(q,null,{default:u(()=>[o(I),o(S,null,{default:u(({Component:E})=>[(a(),$(ne(E),null,{"main-header":u(()=>[o(f,{title:i(h)||i(l)("menu.categories"),icon:y.value,color:i(t).color,"page-title-class":i(t).pageTitleClass},null,8,["title","icon","color","page-title-class"])]),"main-content":u(()=>[o(z,{"enter-active-class":"animate-fade-in animate-duration-400",appear:""},{default:u(()=>[p("div",de,b(i(l)("counter.categories",Array.from(i(n).children).length)),1)]),_:1}),o(C,{categories:i(n).children},null,8,["categories"]),o(S)]),"main-nav-before":u(()=>[e.value?(a(),$(P,{key:0,class:"post-collapse-container",m:"t-4",w:"full"},{default:u(()=>[o(f,{m:"t-10",title:e.value==="Uncategorized"?i(l)("category.uncategorized"):e.value.split("/").join(" / "),icon:"i-ri-folder-open-line"},null,8,["title"]),o(K,{w:"full",m:"b-4",p:"x-20 lt-sm:x-5",posts:d.value},null,8,["posts"])]),_:1})):w("v-if",!0)]),_:2},1024))]),_:1}),o(j)]),_:1}),o(T)],64)}}});export{Se as default};
